# 批量更新的善后工作: 钱够的企业补款(产品机上实际执行)
#   2016年3月1日, 因为处理月底禁用的icc_scheduler程序连接数据库失败, 而导致的故障
# You can run this seed by `$ rake db:seed:set_available_for_charge_enough_prod`
puts "==== 钱够的企业补款 ===="
companies = [[60003, 1800.0], [60019, 900.0], [60021, 300.0], [60053, 1200.0], [60059, 450.0], [60068, 2400.0], [60072, 600.0], [60079, 1500.0], [60091, 2700.0], [60109, 88.0], [60113, 600.0], [60129, 6000.0], [60130, 2100.0], [60137, 650.0], [60143, 300.0], [60153, 300.0], [60164, 500.0], [60166, 500.0], [60167, 500.0], [60173, 1800.0], [60178, 500.0], [60192, 1200.0], [60210, 1500.0], [60211, 3900.0], [60292, 100.0], [60296, 704.0], [60304, 200.0], [60308, 650.0], [60309, 506.0], [60319, 700.0], [60333, 300.0], [60340, 2300.0], [61009, 3000.0], [62007, 3450.0], [62028, 50.0], [62040, 2700.0], [62042, 2700.0], [62043, 750.0], [62047, 900.0], [62050, 3600.0], [62051, 3900.0], [62052, 300.0], [62054, 200.0], [62058, 1316.0], [62063, 600.0], [62067, 2880.0], [62078, 300.0], [62088, 288.0], [64017, 150.0], [64019, 3300.0], [64033, 2100.0], [64036, 3000.0], [64079, 600.0], [64082, 700.0], [64089, 2800.0], [64093, 2304.0], [64094, 650.0], [64099, 1880.0], [64104, 1600.0], [65019, 1800.0], [65021, 2100.0], [65023, 1200.0], [65028, 900.0], [65029, 1500.0], [65037, 300.0], [65044, 300.0], [65046, 5700.0], [65050, 2000.0], [65058, 3000.0], [65077, 288.0], [65080, 1778.0], [66003, 900.0], [66008, 6900.0], [66015, 1050.0], [66016, 2400.0], [66018, 1504.0], [66025, 750.0], [66027, 500.0], [66031, 500.0], [66035, 600.0], [66037, 250.0], [66042, 3600.0], [66044, 3600.0], [66051, 1500.0], [66054, 600.0], [66077, 200.0], [66079, 950.0], [66081, 200.0], [67007, 600.0], [67018, 3148.0], [67020, 100.0], [67036, 1000.0], [67039, 50.0], [67053, 1200.0], [67055, 6600.0], [67062, 1500.0], [67069, 352.0], [67076, 28.0], [67090, 1800.0], [67097, 2100.0], [67099, 1200.0], [69005, 10472.0], [69008, 160.0], [69012, 600.0], [69018, 500.0], [69019, 1800.0], [69032, 1128.0], [69039, 320.0], [69043, 1316.0], [69045, 200.0], [69047, 1128.0]]

companies.each_with_index do |company_, i|
  company = Company.find(company_[0])
  add_money = company_[1]
  if add_money > 0
    puts "#{i + 1} #{company.id} 前余额:#{company.charge_company.balance}元, 需补款:#{add_money}元"

    Recharge.create!(company_id: company.id,
                     operator_id: 1,
                     amount: add_money,
                     balance: company.charge_company.balance + add_money,
                     remark: '程序自动补款，补齐余额。')

    puts "补款前余额: #{company.charge_company.balance}"
    company.charge_company.update!(balance: company.charge_company.balance + add_money)
    puts "补款后余额: #{company.charge_company.balance}"
  end
end

puts '==== 钱够的企业补款完成 ==== '